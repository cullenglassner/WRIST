{% extends "base.html" %}

{% comment %}
    This is the contact list page.
{% endcomment %}

{% block head %}
    <title>WRIST | Contacts{% block title %}{% endblock %}</title>
    <style type="text/css">
        .tg  {border-collapse:collapse;border-spacing:0;border-color:#999;}
        .tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#999;color:#444;background-color:#F7FDFA;border-top-width:1px;border-bottom-width:1px;}
        .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#999;color:#fff;background-color:#26ADE4;border-top-width:1px;border-bottom-width:1px;}
        .tg .tg-s6z2{text-align:center}
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            var $rows = $('#table tr');
            $('#search').keyup(function () {

                var val = '^(?=.*\\b' + $.trim($(this).val()).split(/\s+/).join('\\b)(?=.*\\b') + ').*$',
                    reg = RegExp(val, 'i'),
                    text;

                $rows.show().filter(function () {
                    text = $(this).text().replace(/\s+/g, ' ');
                    return !reg.test(text);
                }).hide();
            });
        });
    </script>
{% endblock %}

{% block body %}
    <header>
        <h1>WRIST | Contacts</h1>
    </header>
    <div id="table_header">
        Contacts {% if pending_contact_list %}
                    <select id="pending_dropdown">
                        <option></option>
                        {% for p_contact in pending_contact_list %}
                            <option>{{ p_contact.first_name }} {{ p_contact.last_name }}</option>
                        {% endfor %}
                    </select>
                    (<a href="pending/">{{ pending_contact_list|length }} Pending</a>)
                {% endif %}
        <input type="text" id="search" placeholder="Search" />
    </div>
    <table id="table" class="tg" width="100%">
        {% for contact in contact_list %}
            <tr class="tg-031e">
                <td class="tg-031e"><a href="/account/profile/{{ contact.uid }}">{{ contact.first_name }} {{ contact.last_name }}</a></td>
                <td class="tg-031e">{{ contact.phone_number }}</td>
            </tr>
        {% empty %}
            <tr class="tg-031e">
                <td class="tg-031e" colspan="2">No contacts yet.</td>
            </tr>
        {% endfor %}
    </table>

    <div id="new_contact"><a href="/contacts/add_contact/" title="add">Add a new contact.</a></div>

{% endblock %}
